# IIWM
## Intelligent In-memory Workflow Manager
<div style="text-align: justify">
Workflows are largely used to orchestrate complex sets of operations required to handle and process huge amounts of data. Parallel processing is often vital to reduce execution time when complex data-intensive workflows must be run efficiently, and at the same time in-memory processing can bring important benefits to accelerate execution. However, optimization techniques are necessary to fully exploit in-memory processing avoiding performance drops due to memory saturation events. This paper proposes a novel solution, called Intelligent In-memory Workflow Manager (IIWM), for optimizing the in-memory execution of data-intensive workflows on parallel machines. IIWM is based on two complementary strategies: 1) a machine learning strategy for predicting memory occupancy and execution time of workflow tasks; 2) a scheduling strategy that allocates tasks to a computing node taking into account the (predicted) memory occupancy and execution time of each task, and the memory available on that node.
The effectiveness of the machine learning-based predictor and the scheduling strategy are demonstrated experimentally using as a testbed Spark, a high-performance Big Data processing framework that exploits in-memory computing to speed up execution of large-scale applications.
In particular, two synthetic workflows have been prepared for testing the robustness of IIWM in scenarios characterized by a high level of parallelism and a limited amount of memory reserved for execution. Furthermore, a real data analysis workflow has been used as a case study, for better assessing the benefits of the proposed approach.
Thanks to high accuracy in predicting resources used at runtime, IIWM was able to avoid disk writes caused by memory saturation, outperforming a traditional strategy in which only dependencies among tasks are taken into account.
Specifically, IIWM achieved up to 31% and 40% reduction of makespan and a performance improvement up to 1.45x and 1.66x on the synthetic workflows and the real case study respectively.

## How to cite

R. Cantini, F. Marozzo, A. Orsino, D. Talia, P. Trunfio, "Exploiting Machine Learning For Improving In-memory Execution of Data-intensive Workflows on Parallel Machines". Future Internet, 2021. Note: To appear.

## Dataset for performance estimation

The provided dataset was generated by monitoring the execution of several MLlib algorithms on different input datasets, covering the main data mining tasks, i.e. classification, clustering, and association rules. The monitored executions was performed using Spark 3.0.1 on a cluster node equipped with an AMD processor with 64 cores and 256 GB of RAM. Monitoring was performed through the Spark 3.0.1 APIs.

This dataset, used for training the prediction model exploited by the scheduling strategy of IIWM, contains the following information:
- The description of the task, such as its class (e.g., classification, clustering, etc.), type (fitting or predicting task), and algorithm (e.g., SVM, K-Means, etc.). 
- The description of the input dataset in terms of the number of rows, columns, categorical columns and overall dataset size.
- Peak memory usage (both execution and storage) and execution time, which represent the three target variables to be predicted by the regressor. In order to obtain more significant data, the metrics were aggregated on median values by performing ten executions per task.

In the following an illustrative sample of the provided dataset is provided.

| TaskName | TaskType | TaskClass | Rows | Columns | CategoricalColumns | Size | PeakStorageMemory | PeakExecutionMemory | Duration |
|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|
| GMM | Estimator | Clustering | 1474971 | 28 | 0 | 87.0045 | 433.37 | 1413.5 | 108204 |
| KMeans | Estimator | Clustering | 5000000 | 104 | 0 | 1239.78 | 4624.52 | 4112 | 56233.5 |
| DecisionTree | Estimator | Classification | 9606 | 1921 | 0 | 84.9105 | 730.09 | 297.895 | 39292 |
| NaiveBayes | Estimator | Classification | 260924 | 4 | 0 | 13.4986 | 340.92 | 6982.82 | 16531.5 |
| FPGrowth | Estimator | AssociationRules | 823593 | 180 | 180 | 697 | 9493.85 | 1371.03 | 96071.5 |
| GMM | Transformer | Clustering | 165474 | 14 | 1 | 6.36604 | 2.34 | 1e-06 | 62.5 |
| KMeans | Transformer | Clustering | 4898431 | 42 | 3 | 648.887 | 3.23 | 1e-06 | 35 |
| DecisionTree | Transformer | Classification | 1959372 | 42 | 4 | 257.686 | 3.68 | 1e-06 | 65.5 |
| NaiveBayes | Transformer | Classification | 347899 | 4 | 0 | 17.9982 | 4.26 | 1e-06 | 92.5 |
| FPGrowth | Transformer | AssociationRules | 136073 | 34 | 34 | 13.5493 | 1229.95 | 633.5 | 52429 |

</div>
